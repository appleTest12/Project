<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>게시판</title>
	<script type="text/javascript" src="/js/com-ajax.js"></script>
</head>
<script type="text/javascript">

	// 페이지 온로드시 게시글 목록 조회
	window.onload = function () {
		getList();
	}

	// 게시글 목록 조회
	function getList() {
		AJAX.ajaxCall("GET", "/notice", "", afterGetList);
	}
	
	// 조회 후 처리
	function afterGetList(response) {
		resultTable(response);
	}

	// 동적으로 테이블 생성
	function resultTable(response) {
		document.querySelector("#fieldListBody").innerHTML = "";
		
		if (response.length > 0) {
			response.forEach(function (result, index) {

				let element = document.querySelector("#fieldListBody");

				let template = `
					<td><p>${result.title}</p></td>
					<td><p>${result.writer}</p></td>
					<td><p>${result.regDate}</p></td>
				`;
				element.insertAdjacentHTML('beforeend', template);
			});
		}
	}
	
</script>

<body>
	<div>
		<h2>게시판 목록</h2>
		<table>
			<tr>
				<td><button onclick="getList()">조회</button></td>
			</tr>
		</table>
	</div>
	<div>
		<table>
			<colgroup>
				<col width="150px" />
				<col width="150px" />
				<col width="250px" />
			</colgroup>
			<thead>
				<tr>
					<th>제목</th>
					<th>작성자</th>
					<th>작성시간</th>
				</tr>
			</thead>
			<tbody id="fieldListBody">
			</tbody>
		</table>
	</div>
</body>
</html>